API Coverage Calculator
===

This tool is used to measure our current progress wrapping the TileDB C API for
Rust. This allows us to both track progress and once fully wrapped ensure that
we maintain that completeness.

There are three basic states a given C API can be in:

  * unwrapped - Its generated by bindgen, but not found in tiledb/sys.
  * wrapped - Its generated by bindgen, and exists in tiledb/sys
  * uncalled - It exists in tiledb/sys, but there is no `ffi::tiledb_...` call
                in tiledb/api

Of note, to count as called, we must reference any api `tiledb_foo` as
`ffi::tiledb_foo`.

To help us handle where we might want to diverge from bindgen output, there are
two files in tiledb/sys for ignoring and remapping APIs.

`tiledb/sys/ignore.rs`
---

You can paste entries from bindgen generated output into this file. Note that
the signatures must be identical. This way if the C API ever changes its
signature we'll be alerted that it has happened.

`tiledb/sys/remapped.rs`
---

The remapped.rs file is similar to ignored, but it has one main difference. For
every API that we would like to remap, we must have two definitions one
prefixed with `old_` and one with `new_`. That means if you wanted to remap
something like the `tiledb_version` function, there needs to be both an
`old_tiledb_version` and a `new_tiledb_version` where `old_tiledb_version` has
to match the generated definition, and the `new_tiledb_version` is what will be
used to verify what's in tiledb/sys.

Usage
===

Assuming you are able to build and run the main tests, you can build the
`api-coverage` tool with the following:

```bash
$ cd path/to/tiledb-rs/tools/api-coverage
$ cargo build
```

To run the tool:

```bash
cd path/to/tiledb-rs
./target/debug/api-coverage
```

The binary also has a standard CLI interface if you need to pass non-default
paths for some reason.
